---
layout      : post
title       : "Creación de un Laboratorio para Pentesting Windows"
author      : elc4br4
image       : /assets/images/articles/laboratorio-windows/Laboratorio.webp
optimized_image : /assets/images/articles/laboratorio-windows/Laboratorio.webp
category    : [ article ]
tags        : [ Windows Pentesting Lab ]
description: Breve artículo introductorio con la creación de un laboratorio destinado a Pentesting en entornos Windows para posteriormente en el próximo arículo desplegar una gran variedad de ataques y aprender tanto la configuración de los mismos como su explotación.
---

Breve artículo introductorio con la creación de un laboratorio destinado a Pentesting en entornos Windows para posteriormente en el próximo arículo desplegar una gran variedad de ataques y aprender tanto la configuración de los mismos como su explotación.

Usaremos Windows Server 2016 y 2 máquinas W10 (puede que se vayan ampliando a lo largo del pentest).

Crearemos la máquina virtual con la ISO de Windows server y procedemos a su configuración inicial.

He de añadir que en mi caso las máquinas las he configurado con el **modo de red NAT.**

![](/assets/images/articles/laboratorio-windows/Untitled.png)

Usaré la versión Standard con GUI.

 El usuario Administrador tendrá la contraseña **P@ssw0rd1234.**

![](/assets/images/articles/laboratorio-windows/Untitled%201.png)

Añadimos las **Vmware Tools** y las instalamos.

Una vez configurada la máquina procedo a **instalar el rol de Active Directory**.

Instalar el rol de Directorio Activo es muy sencillo, solo hay que seguir estos pasos.

Desde el **administrador del servidor** hacemos click sobre **Administrar** y sobre **Agregar roles y características**.

![](/assets/images/articles/laboratorio-windows/Untitled%202.png)

![](/assets/images/articles/laboratorio-windows/Untitled%203.png)

![](/assets/images/articles/laboratorio-windows/Untitled%204.png)

![](/assets/images/articles/laboratorio-windows/Untitled%205.png)

![](/assets/images/articles/laboratorio-windows/Untitled%206.png)

De aquí en adelante es continuar la sucesión de Siguientes hasta que veamos el botón de instalar.

Una vez instalado desde el **Administrador del Servidor** veremos una **alerta** en la parte superior derecha con este icono.

![](/assets/images/articles/laboratorio-windows/Untitled%207.png)

Hacemos click sobre ello y le damos a **promover este servidor como controlador de dominio**.

![](/assets/images/articles/laboratorio-windows/Untitled%208.png)

Y debemos seguir estos pasos para finalizar la configuración.

Asignamos un nombre al dominio.

![](/assets/images/articles/laboratorio-windows/Untitled%209.png)

Asignamos una contraseña…

![](/assets/images/articles/laboratorio-windows/Untitled%2010.png)

Los siguientes pasos se basan en darle Siguiente a todo lo que venga hasta que nos salga la opción de instalar.

Una vez instalado se reiniciará la máquina y ya estará completamente instalado y configurado el DC.

Omito la instalación de las máquinas Windows 10 por su simplicidad y con el fin de no alargar mucho el documento,

Simplemente debemos tener dos máquinas Windows 10 en modo de red NAT.

Una vez instaladas y actualizadas debemos cambiar el **hostname** y unir las máquinas al dominio que hemos creado anteriormente (**elc4br4corp.local**).

Para cambiar el hostname tenemos que ir a **configuración →** **sistema** y se nos abrirá la ventana de configuración, donde deberemos darle a **cambiar el nombre de este equipo**.

![](/assets/images/articles/laboratorio-windows/Untitled%2011.png)

Así lo haremos con las tres máquinas, una de ellas será **PC-ELC4BR4**, **PC-TIMOTI** y **AD-DC.**

Debemos **reiniciar** el equipo para que se realicen los cambios.

Antes de unirlo al dominio en la configuración de red debemos asignar como dirección DNS la dirección ip del DC.

![](/assets/images/articles/laboratorio-windows/Untitled%2012.png)

Para unir las máquinas al dominio nos dirigimos a **panel de control** → **sistema** y se nos abrirá la ventana de configuración, donde le daremos a **cambiar el nombre de este equipo (avanzado)**.

![](/assets/images/articles/laboratorio-windows/Untitled%2013.png)

![](/assets/images/articles/laboratorio-windows/Untitled%2014.png)

Se nos pedirán las **credenciales** (en mi caso **Administrador:P@ssword1234**) y ya se habrá unido al dominio.

Así haremos con las máquinas Windows 10.

Una vez unidos al dominio procedemos a la **creación de usuarios pertenecientes al dominio**, de forma que podremos **autenticarnos** con esos usuarios en el dominio desde cualquiera de los equipos.

Para crear los usuarios nos dirigimos a la máquina del DC (Windows Server 2016) y abrimos el **Administrador del Servidor.**

Le damos a **herramientas** y a **Usuarios y equipos de Active Directory**.

![](/assets/images/articles/laboratorio-windows/Untitled%2015.png)

Crearé dos usuarios en el dominio, el usuario **cfernandez** y el usuario **timoti**.

Para ello basta con hacer click derecho y darle a nuevo.

![](/assets/images/articles/laboratorio-windows/Untitled%2016.png)

![](/assets/images/articles/laboratorio-windows/Untitled%2017.png)

Asignamos una contraseña y marcamos la opción que dice “**la contraseña nunca expira**”.

Debemos hacer lo mismo con el usuario **timoti**.

Una vez creados podemos **loguearnos** con estos usuarios desde las máquinas en el dominio creado.

![](/assets/images/articles/laboratorio-windows/Untitled%2018.png)

![](/assets/images/articles/laboratorio-windows/Untitled%2019.png)

**Y esto es todo, con este pequeño laboratorio podemos comenzar a desplegar técnicas de pentesting en sistemas Windows, que las veremos en el próximo documento.**

[elc4br4 - Overview](https://github.com/elc4br4)